# ==============================================================================
# Pi-hole Local DNS Records - Automatically Generated by Ansible
# ==============================================================================
# This file maps user-friendly hostnames to the IP addresses of the cluster nodes.
#
# To add a new record, update the 'proxy_hosts' variable in group_vars/pi_cluster.yml
# and re-run the post-configure.yml playbook.
# ==============================================================================

{% for host in proxy_hosts %}
# --- {{ host.name | capitalize }} ---
{% if host.forward_host.startswith('<') %}
# Pi-hole runs on the host network, so we target the host's IP directly
address=/{{ host.domain }}/{{ hostvars['pi4-mgmt']['ansible_host'] }}
{% elif host.forward_host == 'opencti_server' %}
# OpenCTI runs on the dedicated intel node
address=/{{ host.domain }}/{{ hostvars['pi4-intel']['ansible_host'] }}
{% else %}
# All other core services run on the main control plane hub
address=/{{ host.domain }}/{{ hostvars['pi5-control']['ansible_host'] }}
{% endif %}
{% endfor %}
